<style lang="scss">  $prefix: '.zero-mde';  #{$prefix} {    height: 300px;    border: 1px solid #e1e4e8;    :global(*) {      box-sizing: border-box;    }    &-body {      height: calc(100% - 58px);      display: flex;      #{$prefix}-editor {        height: 100%;        flex: 1;      }      #{$prefix}-preview {        flex: 1;        overflow-y: auto;      }    }  }</style><script lang="ts">    import * as monaco from 'monaco-editor'    import {onDestroy, onMount} from 'svelte'    import Viewer from './Viewer.svelte'    import Toolbar from './toolbar.svelte'    import Status from './status.svelte'    import type {IStandaloneCodeEditor} from './editor.ts'    import {createEditorUtils} from './editor.ts'    export let value // 接收值    export let uploadImages // 上传图片方法    let editorContainer: HTMLElement // 容器    let monacoInstance: IStandaloneCodeEditor // 编辑器实例    let editorValue = value || '' // 当前编辑器文本    let showMode = "all" // 显示模式    let wordCount = 0 // 字数    let lineCount = 0 // 行数    let isSyncScroll = false // 是否同步滚动    $:styles = (() => {        if (showMode === "all") {            return 'border-right:1px solid gray'        }    })()    $: context = (() => {        const context = {            editor: monacoInstance,            ...createEditorUtils(monacoInstance),        }        return context    })()    self.MonacoEnvironment = {        getWorker: function (workerId, label) {            const getWorkerModule = (moduleUrl, label) => {                return new Worker(self.MonacoEnvironment.getWorkerUrl(moduleUrl), {                    name: label,                    type: 'module',                })            }            return getWorkerModule('/monaco-editor/esm/vs/editor/editor.worker?worker', label)        },    }    // 更新统计数据    function updateData() {        editorValue = monacoInstance.getValue()        lineCount = monacoInstance.getModel().getLineCount()        wordCount = editorValue.length    }    // 切换同步状态    function handleChangeSync(e: CustomEvent) {        isSyncScroll = e.detail    }    // 回到顶部    function handleScrollTop() {        //TODO:回到顶部功能    }    // 标题列表改变    function handleChangeHeading(e: CustomEvent){        const list = e.detail as Array<{depth:number,value:string}>    }    onMount(() => {        monacoInstance = monaco.editor.create(editorContainer, {            value,            language: 'markdown',            minimap: {                enabled: false, // 是否启用预览图            },            automaticLayout: true, // 自动布局            overviewRulerBorder: false, // 不显示滚动条边框            scrollbar: {                // 滚动条设置                verticalScrollbarSize: 0, // 竖滚动条                horizontalScrollbarSize: 0, // 横滚动条            },        })        updateData()        monacoInstance.onDidChangeModelContent(() => {            updateData()        })    })    onDestroy(() => {        monacoInstance.dispose()    })</script><div class="zero-mde">    <!--    工具栏-->    <Toolbar {context} {uploadImages}/>    <div class="zero-mde-body">        <!--        编辑区-->        <div class="zero-mde-editor" bind:this={editorContainer} style={styles}></div>        <!--        预览区-->        <div class="zero-mde-preview">            <Viewer value={editorValue} on:change:heading={handleChangeHeading}/>        </div>        <!--        目录-->        <div class="zero-mde-sidebar"></div>    </div>    <Status {lineCount} {wordCount} {isSyncScroll} on:change-sync={handleChangeSync} on:scroll-top={handleScrollTop}/></div>